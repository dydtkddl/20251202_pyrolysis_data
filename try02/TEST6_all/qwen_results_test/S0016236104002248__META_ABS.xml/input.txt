Formation of HCN and NH3 during coal macerals pyrolysis and gasification with CO2 Three coal macerals with high purities were separated from Pingshuo gas coal. The formation rules of HCN and NH3 during macerals pyrolysis and gasification were investigated. Experiments were carried out in a tubular quartz reactor at atmospheric pressure. The reactor allowed coal particles to be heated up rapidly and held for a prespecified period of time at a peak temperature. The amount of HCN and NH3 were quantified by ion chromatography. The influence of temperature and macerals type on the formation rules of HCN and NH3 was discussed. Results showed that the formation of HCN was mainly due to the thermal cracking of volatile, and NH3 formed both from the thermal cracking of volatile and the cracking of nascent char. The HCN yield increased with an increase in pyrolysis temperature. For three coal macerals (liptinite, vitrinite and inertinite), the yield of HCN depended not only on their volatile contents but also nitrogen-containing functional groups, in which more pyrrole-type nitrogens would form more amount of HCN at lower temperature. The yield of NH3 depended on the ability of forming ‘H’ radical. Under the experiment condition in this study, inertinite could convert more nitrogen into NH3 than vitrinite and liptinite. The yield of HCN during gasification was almost the same as that during pyrolysis, the yield of NH3 during gasification was little higher than that during pyrolysis.